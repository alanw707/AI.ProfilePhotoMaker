<!-- Premium Package Selection Section -->
<div class="premium-package-selection">

  <!-- Current Package Status (if user has active package) -->
  <div *ngIf="userPackageStatus?.hasActivePackage" class="current-package-status">
    <div class="status-card active">
      <div class="status-icon">âœ…</div>
      <div class="status-content">
        <h3>Active Package: {{ userPackageStatus?.packageName }}</h3>
        <p>{{ userPackageStatus?.creditsRemaining }} credits remaining</p>
        <p *ngIf="!userPackageStatus?.modelExpired" class="expires">
          Expires in {{ userPackageStatus?.daysUntilExpiration }} days
        </p>
        <p *ngIf="userPackageStatus?.modelExpired" class="expired">
          Model expired - please purchase a new package
        </p>
      </div>
    </div>
  </div>

  <!-- Info Section - How Premium Packages Work -->
  <div class="info-section">
    <h3>How Premium Packages Work</h3>
    <div class="info-grid">
      <div class="info-item">
        <div class="info-icon">ðŸŽ¯</div>
        <h4>Custom AI Training</h4>
        <p>Upload your photos to train a personalized AI model that learns your unique features</p>
      </div>
      <div class="info-item">
        <div class="info-icon">ðŸŽ¨</div>
        <h4>Multiple Styles</h4>
        <p>Generate professional photos in various styles - corporate, creative, casual, and more</p>
      </div>
      <div class="info-item">
        <div class="info-icon">âš¡</div>
        <h4>Credit System</h4>
        <p>1 credit for training your model + 1 credit per generated image. Use credits flexibly</p>
      </div>
      <div class="info-item">
        <div class="info-icon">ðŸ”’</div>
        <h4>Privacy First</h4>
        <p>Your custom model expires after 7 days for privacy and security</p>
      </div>
    </div>
  </div>

  <!-- Package Selection Header -->
  <div class="section-header">
    <h2>Choose Your Package</h2>
    <p>Select the perfect package for your professional photo needs</p>
  </div>

  <!-- Loading State -->
  <div *ngIf="isLoadingPackages" class="loading-state">
    <div class="spinner"></div>
    <p>Loading premium packages...</p>
  </div>

  <!-- Package Grid -->
  <div *ngIf="!isLoadingPackages && packages.length > 0" class="packages-grid">
    <div 
      *ngFor="let package of packages" 
      class="package-card"
      [class.recommended]="isPackageRecommended(package)"
      [class.selected]="selectedPackage?.id === package.id"
    >
      <!-- Recommended Badge -->
      <div *ngIf="isPackageRecommended(package)" class="recommended-badge">
        Most Popular
      </div>

      <!-- Package Header -->
      <div class="package-header">
        <h3>{{ package.name }}</h3>
        <div class="package-price">
          <span class="price">${{ package.price }}</span>
          <span class="credits-info">{{ package.credits }} credits</span>
        </div>
        <p class="package-recommendation">{{ getPackageRecommendation(package) }}</p>
      </div>

      <!-- Package Features -->
      <div class="package-features">
        <ul>
          <li *ngFor="let feature of getPackageFeatures(package)">
            <span class="checkmark">âœ“</span>
            {{ feature }}
          </li>
        </ul>
      </div>

      <!-- Package Actions -->
      <div class="package-actions">
        <button 
          *ngIf="!userPackageStatus?.hasActivePackage || userPackageStatus?.modelExpired" 
          class="btn btn-primary"
          [class.loading]="isPurchasing"
          [disabled]="isPurchasing"
          (click)="purchasePackage(package)"
        >
          <span *ngIf="!isPurchasing">Get Started - ${{ package.price }}</span>
          <span *ngIf="isPurchasing">Processing...</span>
        </button>
        
        <button 
          *ngIf="userPackageStatus?.hasActivePackage && !userPackageStatus?.modelExpired"
          class="btn btn-secondary"
          disabled
        >
          Already Active
        </button>
        
        <button 
          class="btn btn-outline"
          (click)="selectPackage(package)"
        >
          View Details
        </button>
      </div>
    </div>
  </div>

  <!-- No Packages State -->
  <div *ngIf="!isLoadingPackages && packages.length === 0" class="no-packages-state">
    <div class="empty-state">
      <div class="empty-icon">ðŸ“¦</div>
      <h3>No Packages Available</h3>
      <p>Premium packages are currently unavailable. Please try again later.</p>
    </div>
  </div>

  <!-- Package Comparison -->
  <div *ngIf="packages.length > 0" class="package-comparison">
    <h3>What's Included</h3>
    <div class="comparison-table">
      <table>
        <thead>
          <tr>
            <th>Feature</th>
            <th *ngFor="let package of packages">{{ package.name }}</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>Total Credits</td>
            <td *ngFor="let package of packages">{{ package.credits }}</td>
          </tr>
          <tr>
            <td>Max Photo Styles</td>
            <td *ngFor="let package of packages">{{ package.maxStyles }}</td>
          </tr>
          <tr>
            <td>Images per Style</td>
            <td *ngFor="let package of packages">{{ package.maxImagesPerStyle }}</td>
          </tr>
          <tr>
            <td>Custom AI Training</td>
            <td *ngFor="let package of packages">âœ“</td>
          </tr>
          <tr>
            <td>Model Access Period</td>
            <td *ngFor="let package of packages">7 days</td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>

</div>